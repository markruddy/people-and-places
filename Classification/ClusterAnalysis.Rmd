---
title: "People and places Survey Group cluster analysis"
author: "Mark Ruddy"
date: "6 August 2016"
output: html_document
---

Load libraries and data
```{r Load libraries, include=FALSE}
library(dplyr)
library(tidyr)
library(ggplot2)
library(knitr)
library(cluster)

setwd("~/Documents/Personal/Work/DataScience/PeopleAndPlaces")
load("./Data/pp.class.RData")
```



## Exploratory clustering

As a first step the existence of any structure in *SurveyGp*. This can guide the direction of additional work. This will be done, intially at least, without data transformation.


### Distance calculation

Calculate Gower distance matrix.
```{r}
cdf <- as.data.frame(cdf)
str(ic)
## Gower distance matrix removing ID and SurveyGp and assigning Emp_?_reas variables as asymmetric binary's
cdf.gow <- daisy(ic[,-1:-2], metric = "gower", type=list(asymm=c(5,6,7,8,9,10,11,12)))

summary(cdf)
```


Sanity check - compare most similar and dissimmilar responses
```{r Sanity check}
## Find most dissimilar responses

cdf.gmat <- as.matrix(cdf.gow)

## Output most similar pair
cdf[which(cdf.gmat==min(cdf.gmat[cdf.gmat!=min(cdf.gmat)]),arr.ind = TRUE)[1,],]
## Appears to have many similarities in raw variables

## Output most dissimilar pair
cdf[which(cdf.gmat==max(cdf.gmat[cdf.gmat!=max(cdf.gmat)]),arr.ind = TRUE)[1,],]
## Appears to have many dissimilarities in raw variables
```

### Clustering

The PAM (partitioning around mediods) is a clustering algorithm 







<!-- * *Cycleweek*, *Walkweek*, *Carweek* -->
<!-- * *MinsCycling*, *MinsWalking*, *MinsCar* (Requires removal of outliers) -->
<!-- * *HH_carvan_sum* -->
<!-- * *Total_walk*, *Total_cyc*, *Total_mcyc*, *Total_PT*, *Total_taxi*, *Total_car* -->
<!-- * *Emp_FTwork_reas*, *Emp_PTwork_reas*, *Emp_PTstud_reas*, *Emp_looking_reas*, *Emp_notlkg_reas*, *Emp_retired_reas*, *Emp_volwork_reas*, *Emp_home_reas*, *Emp_other_reas*, *Emp_refused_reas*, *Emp_paid*, *Emp_FT* -->







